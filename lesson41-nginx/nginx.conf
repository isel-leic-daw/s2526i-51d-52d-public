events {
    worker_connections  1024;
}

http {
    upstream jvm-static {
        server agenda-jvm-1:8080;
        server agenda-jvm-2:8081;
    }

    upstream jvm-dynamic {
        server agenda-jvm-dynamic:8088;
    }

    server {
        listen       3000;
        server_name  localhost;

        location / {
            proxy_pass http://jvm-static;
        }
    }

    server {
        listen       3001;
        server_name  localhost;

        location / {
            proxy_pass http://jvm-dynamic;
        }
    }
}